---
title: Room page
description: Learn how to set up the Room page on Next.js
---

In this guide, we will build the **Room page**:

![Room page](/images/room.png)

This page renders the collaborative canvas once a user joins the room.

## Prerequisites

Before you begin, ensure that you have completed [Set up the Enter Room page](/docs/main/manual-installation/frontend/enter-room-page).

## Step by step

To set up the Room page in your Next.js project, follow these steps:

<div className="fd-steps">

<div className="[&_h3]:fd-step">
 
### Install the UI building block components

Set up the necessary [Shadcn/UI](https://ui.shadcn.com/docs) components for the `Room` page.

We will be using the [Shadcn/UI CLI](https://ui.shadcn.com/docs/cli) to install the UI components. Accept
all the defaults from the CLI options.

In the root directory of your project, follow these steps:

- Install the [Tooltip](https://ui.shadcn.com/docs/components/tooltip) component:

  ```shell
  npx shadcn@latest add tooltip
  ```

- Install the [Dropdown Menu](https://ui.shadcn.com/docs/components/dropdown-menu) component:

  ```shell
  npx shadcn@latest add dropdown-menu
  ```

- Install the [Avatar](https://ui.shadcn.com/docs/components/avatar) component:

  ```shell
  npx shadcn@latest add avatar
  ```

</div>

<div className="[&_h3]:fd-step">
 
### Define Weave.js Nodes, Actions & Plugins to use

Let's define a set of constants that will define the **Weave.js** Nodes, Plugins, and Actions that we will use.

Follow these steps:

- On the `components` folder, create a folder named `utils`.
- On the `components/utils` folder, create a file named `constants.ts` with the following content:

  <include lang="ts" meta='title="components/utils/constants.ts"'>
    ../../../../../manual-installation/components/utils/constants.ts
  </include>

  File explanation:

  - **`(1)`**: Import the **Weave.js SDK** dependency.
  - **`(2)`**: Set up the fonts available on **Weave.js**.
  - **`(3)`**: Define the nodes we will use in this example.
  - **`(4)`**: Define the actions we will use in this example.
  - **`(5)`**: Define the custom plugins we will use in this example. By default the [WeaveProvider](/docs/react/api-reference/providers/weave-provider)
    pre-defines a set of plugins. In this case, we can override them or add extra plugins.

</div>

<div className="[&_h3]:fd-step">
 
### Define some front utils to use

Replace the content of the `lib/utils.ts` with the following content:

<include lang="ts" meta='title="components/utils/constants.ts"'>
  ../../../../../manual-installation/lib/utils.ts
</include>

</div>

<div className="[&_h3]:fd-step">
 
### Define the page React hooks

Let's define the hooks with the logic for the **Room** page.
This way, we separate the component logic from the UI logic.

To start, create a `hooks` folder on the root directory.

---

#### useHandleRouteParams hook

On the `hooks` folder, create a file named `use-handle-route-params.ts` with
the following content:

<include lang="tsx" meta='title="hooks/use-handle-route-params.ts"'>
  ../../../../../manual-installation/hooks/use-handle-route-params.ts
</include>

This hook helps us handling the route params with Next.js to extract the roomId where
we want to connect to.

---

#### useGetWebsocketsStore hook

Let's create a hook that will handle the store instance, it's main responsibilities are:

- Fetch de initial data of the room where we want to connect
- Instantiate Weave.js store

On the `hooks` folder, create a file named `use-get-websockets-store.ts` with the following
content:

<include lang="tsx" meta='title="hooks/use-get-websockets-store.ts"'>
  ../../../../../manual-installation/hooks/use-get-websockets-store.ts
</include>

This hook is a helper to setup the Websocket Store of Weave.js.

Now let's setup a function that will call the API we will define next, lets create an `api`
folder on the root of the project and inside lets create a file named `get-room.ts` with the following
content:

<include lang="ts" meta='title="api/get-room.ts"'>
  ../../../../../manual-installation/api/get-room.ts
</include>

Finally we need to implement the API to fetch the persisted room (in this case on the local file system),
for this we need to create the following folders `/api/rooms/[roomId]` on the `app` folder, once
created on the `[roomId]` folder let's create a `route.ts` file with the following content:

<include lang="ts" meta='title="app/api/rooms/[roomId]/route.ts"'>
  ../../../../../manual-installation/app/api/rooms/[roomId]/route.ts
</include>

</div>

<div className="[&_h3]:fd-step">
 
### Define the page React components

Set up the following directories to organize our components:

- On the `components` folder, create a `room` folder.
- On the `components` folder, create an `overlays` folder.

---

#### Room

On the `components/room` folder, create a file named `room.tsx` with the following content:

<include lang="tsx" meta='title="components/room/room.tsx"'>
  ../../../../../manual-installation/components/room/room.tsx
</include>

---

#### RoomLayout

On the `components/room` folder, create a file named `room.layout.tsx` with the following content:

<include lang="tsx" meta='title="components/room/room.layout.tsx"'>
  ../../../../../manual-installation/components/room/room.layout.tsx
</include>

---

#### RoomLoader

On the `components/room` folder, create a file named `room.loader.tsx` with the following content:

<include lang="tsx" meta='title="components/room/room.loader.tsx"'>
  ../../../../../manual-installation/components/room/room.loader.tsx
</include>

---

#### ConnectedUsers

On the `components/overlays` folder, create a file named `connected-users.tsx` with the following content:

<include lang="tsx" meta='title="components/overlays/connected-users.tsx"'>
  ../../../../../manual-installation/components/overlays/connected-users.tsx
</include>

---

#### ConnectionStatus

On the `components/overlays` folder, create a file named `connection-status.tsx` with the following content:

<include lang="tsx" meta='title="components/overlays/connection-status.tsx"'>
  ../../../../../manual-installation/components/overlays/connection-status.tsx
</include>

---

#### RoomInformationOverlay

On the `components/overlays` folder, create a file named `room-information-overlay.tsx` with the following content:

<include
  lang="tsx"
  meta='title="components/overlays/room-information-overlay.tsx"'
>
  ../../../../../manual-installation/components/overlays/room-information-overlay.tsx
</include>

---

#### RoomUsersOverlay

On the `components/overlays` folder, create a file named `room-users-overlay.tsx` with the following content:

<include lang="tsx" meta='title="components/overlays/room-users-overlay.tsx"'>
  ../../../../../manual-installation/components/overlays/room-users-overlay.tsx
</include>

---

#### ToolbarButton

On the `components/overlays` folder, create a file named `toolbar-button.tsx` with the following content:

<include lang="tsx" meta='title="components/overlays/toolbar-button.tsx"'>
  ../../../../../manual-installation/components/overlays/toolbar-button.tsx
</include>

---

#### Toolbar

On the `components/overlays` folder, create a file named `toolbar.tsx` with the following content:

<include lang="tsx" meta='title="components/overlays/toolbar.tsx"'>
  ../../../../../manual-installation/components/overlays/toolbar.tsx
</include>

---

#### ToolsOverlay

On the `components/overlays` folder, create a file named `tools-overlay.tsx` with the following content:

<include lang="tsx" meta='title="components/overlays/tools-overlay.tsx"'>
  ../../../../../manual-installation/components/overlays/tools-overlay.tsx
</include>

---

#### ZoomHandlerOverlay

On the `components/overlays` folder, create a file named `zoom-handler-overlay.tsx` with the following content:

<include lang="tsx" meta='title="components/overlays/zoom-handler-overlay.tsx"'>
  ../../../../../manual-installation/components/overlays/zoom-handler-overlay.tsx
</include>

</div>

<div className="[&_h3]:fd-step">
 
### Define the page component

To set up the **Room** page component, follow these steps:

- On the `app` folder, create a folder named `room`.
- On the `app/rooms` folder, create a folder named `[roomId]`.
- On the `app/rooms/[roomId]` folder, create a file named `page.tsx` with the following content:

  <include lang="tsx" meta='title="app/rooms/[roomId]/page.tsx"'>
    ../../../../../manual-installation/app/rooms/[roomId]/page.tsx
  </include>

</div>

</div>

## Next steps

Let's now [run the project](/docs/main/manual-installation#run-the-project).
