---
title: Room page
description: Learn how to set up the Room page on Next.js
---

In this guide, you will build the **Room page**:

![Room page](/images/room.png)

This page renders the collaborative canvas once a user joins the room.

## Prerequisites

Before you begin, ensure that you have completed [Set up the Enter Room page](/docs/main/manual-installation/frontend/enter-room-page).

## Step by step

To set up the Room page in your Next.js project, follow these steps:

<div className="fd-steps">

<div className="[&_h3]:fd-step">

### Install the UI building block components

Set up the necessary [Shadcn/UI](https://ui.shadcn.com/docs) components for the `Room` page.

Use the [Shadcn/UI CLI](https://ui.shadcn.com/docs/cli) and accept the default options.

From the project root folder, follow these steps:

- Install the [Tooltip](https://ui.shadcn.com/docs/components/tooltip) component:

  ```shell
  npx shadcn@latest add tooltip
  ```

- Install the [Dropdown Menu](https://ui.shadcn.com/docs/components/dropdown-menu) component:

  ```shell
  npx shadcn@latest add dropdown-menu
  ```

- Install the [Avatar](https://ui.shadcn.com/docs/components/avatar) component:

  ```shell
  npx shadcn@latest add avatar
  ```

</div>

<div className="[&_h3]:fd-step">

### Define Weave.js Nodes, Actions & Plugins to use

Define a set of constants for the **Weave.js** Nodes, Plugins, and Actions.

Follow these steps:

- In the `components` folder, create a folder named `utils`.
- In the `components/utils` folder, create a file named `constants.ts` with:

  <include lang="ts" meta='title="components/utils/constants.ts"'>
    ../../../../../manual-installation/components/utils/constants.ts
  </include>

  File explanation:

  - **`(1)`**: Import the **Weave.js SDK** dependency.
  - **`(2)`**: Set up the fonts available on **Weave.js**.
  - **`(3)`**: Define the nodes used in this example.
  - **`(4)`**: Define the actions used in this example.
  - **`(5)`**: Define the custom plugins used in this example. By default, the [WeaveProvider](/docs/react/api-reference/providers/weave-provider)
    predefines a set of plugins. In this case, which can be overridden or extended here.

</div>

<div className="[&_h3]:fd-step">

### Define the page React hooks

Define the hooks with the logic for the **Room** page.
This separates component logic from UI logic.

To start, create a `hooks` folder in the root directory.

---

#### useHandleRouteParams hook

In the `hooks` folder, create a file named `use-handle-route-params.ts` with:

<include lang="tsx" meta='title="hooks/use-handle-route-params.ts"'>
  ../../../../../manual-installation/hooks/use-handle-route-params.ts
</include>

This hook handles route parameters in Next.js to extract the `roomId` for the connection.

---

#### useGetWebsocketsStore hook

Create a hook to manage the store instance. Its main responsibilities are:

- Fetch the initial data for the room to connect
- Instantiate Weave.js store

In the `hooks` folder, create a file named `use-get-websockets-store.ts` with:

<include lang="tsx" meta='title="hooks/use-get-websockets-store.ts"'>
  ../../../../../manual-installation/hooks/use-get-websockets-store.ts
</include>

This hook is a helper to set up the Websocket Store of Weave.js.

Next, create a function to call the API.
Create an `api` folder in the project root.
Create inside it a file named `get-room.ts` with:

<include lang="ts" meta='title="api/get-room.ts"'>
  ../../../../../manual-installation/api/get-room.ts
</include>

Finally, implement the API to fetch the persisted room (in this case, on the local file system).
Create the folders `/api/rooms/[roomId]` inside the `app` directory.
Inside the `[roomId]` folder, add a `route.ts` file with:

<include lang="ts" meta='title="app/api/rooms/[roomId]/route.ts"'>
  ../../../../../manual-installation/app/api/rooms/[roomId]/route.ts
</include>

</div>

<div className="[&_h3]:fd-step">

### Define the page React components

Set up the following directories to organize our components:

- In the `components` folder, create a `room` folder.
- In the `components` folder, create an `overlays` folder.

---

#### Room

In the `components/room` folder, create a file named `room.tsx` with:

<include lang="tsx" meta='title="components/room/room.tsx"'>
  ../../../../../manual-installation/components/room/room.tsx
</include>

---

#### RoomLayout

In the `components/room` folder, create a file named `room.layout.tsx` with:

<include lang="tsx" meta='title="components/room/room.layout.tsx"'>
  ../../../../../manual-installation/components/room/room.layout.tsx
</include>

---

#### RoomLoader

In the `components/room` folder, create a file named `room.loader.tsx` with:

<include lang="tsx" meta='title="components/room/room.loader.tsx"'>
  ../../../../../manual-installation/components/room/room.loader.tsx
</include>

---

#### ConnectedUsers

In the `components/overlays` folder, create a file named `connected-users.tsx` with:

<include lang="tsx" meta='title="components/overlays/connected-users.tsx"'>
  ../../../../../manual-installation/components/overlays/connected-users.tsx
</include>

---

#### ConnectionStatus

In the `components/overlays` folder, create a file named `connection-status.tsx` with:

<include lang="tsx" meta='title="components/overlays/connection-status.tsx"'>
  ../../../../../manual-installation/components/overlays/connection-status.tsx
</include>

---

#### RoomInformationOverlay

In the `components/overlays` folder, create a file named `room-information-overlay.tsx` with:

<include
  lang="tsx"
  meta='title="components/overlays/room-information-overlay.tsx"'
>
  ../../../../../manual-installation/components/overlays/room-information-overlay.tsx
</include>

---

#### RoomUsersOverlay

In the `components/overlays` folder, create a file named `room-users-overlay.tsx` with:

<include lang="tsx" meta='title="components/overlays/room-users-overlay.tsx"'>
  ../../../../../manual-installation/components/overlays/room-users-overlay.tsx
</include>

---

#### ToolbarButton

In the `components/overlays` folder, create a file named `toolbar-button.tsx` with:

<include lang="tsx" meta='title="components/overlays/toolbar-button.tsx"'>
  ../../../../../manual-installation/components/overlays/toolbar-button.tsx
</include>

---

#### Toolbar

In the `components/overlays` folder, create a file named `toolbar.tsx` with:

<include lang="tsx" meta='title="components/overlays/toolbar.tsx"'>
  ../../../../../manual-installation/components/overlays/toolbar.tsx
</include>

---

#### ToolsOverlay

In the `components/overlays` folder, create a file named `tools-overlay.tsx` with:

<include lang="tsx" meta='title="components/overlays/tools-overlay.tsx"'>
  ../../../../../manual-installation/components/overlays/tools-overlay.tsx
</include>

---

#### ZoomHandlerOverlay

In the `components/overlays` folder, create a file named `zoom-handler-overlay.tsx` with:

<include lang="tsx" meta='title="components/overlays/zoom-handler-overlay.tsx"'>
  ../../../../../manual-installation/components/overlays/zoom-handler-overlay.tsx
</include>

</div>

<div className="[&_h3]:fd-step">

### Define the page component

To set up the **Room** page component, follow these steps:

- On the `app` folder, create a folder named `rooms`.
- On the `app/rooms` folder, create a folder named `[roomId]`.
- On the `app/rooms/[roomId]` folder, create a file named `page.tsx` with:

  <include lang="tsx" meta='title="app/rooms/[roomId]/page.tsx"'>
    ../../../../../manual-installation/app/rooms/[roomId]/page.tsx
  </include>

</div>

</div>

## Next steps

Finally, [run the project](/docs/main/manual-installation#run-the-project).
