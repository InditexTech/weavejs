---
title: Connected Users
description: Get an structure with information about the connected users
---

import { Accordion, Accordions } from "fumadocs-ui/components/accordion";

## Introduction

This plugin returns the list of users currently active in a collaborative session.
It can provide the user name and email, helping participants stay aware of whoâ€™s
online and interacting with the canvas.

## Dependencies

This plugin needs also registered on the Weave instance the following:

- An Store with awareness support.

## Usage

<Accordions>
  <Accordion title="1. Import the plugin" id="import-plugin">
    Start by importing the action with the following import:

    ```ts
    import { WeaveConnectedUsersPlugin } from "@inditextech/weave-sdk";
    ```

  </Accordion>
  <Accordion title="2. Register the plugin" id="register-plugin">
    Then register the action on the Weave class instance.

    ```ts
    const instance = new Weave({
      ...
      plugins: [
        ...,
        new WeaveConnectedUsersPlugin({ // [!code ++]
          onConnectedUsersChanged, // callback to listen to changes to the connected users [!code ++]
          getUser, // function that defines how to get an user metadata [!code ++]
        }), // [!code ++]
      ]
    })
    ```

  </Accordion>
  <Accordion title="3. Use the plugin" id="use-the-plugin">
    Listen to changes to connected users on the `onConnectedUsersChanged` configured callback,
    then react accordingly. Something like this:
    
    ```ts
    const instance = new Weave({
      ...
      plugins: [
        ...,
        new WeaveConnectedUsersPlugin({
          onConnectedUsersChanged: (usersConnected) => {
            for (const [key, value] of Object.entries(usersConnected)) {
              console.log(`${key}: ${value}`);
              // key is an identifier of the user on Yjs, and value is the metadata of
              // the user provided when it joins the room, defined by the WeaveUser type.
            }
          },
          ...
        }),
      ]
    })
    ```
  </Accordion>
</Accordions>
