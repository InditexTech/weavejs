---
title: Comment Tool
description: Allow users to comment on top of the stage content.
---

![Comment Tool action on the Weave.js showcase](/images/actions/comment-tool.png)

import { Accordion, Accordions } from "fumadocs-ui/components/accordion";
import { Kbd } from "@/components/kbd";

## Introduction

This action enables users to attach inline feedback on top of the stage content, useful to communicate
and work collaborative with other peers..

This tool is headless, this means that only provides the handling of Weave internals, in order
to make it fully work you need to provide:

- The UI / UX for the app you're building
- A backend to store / retrieve / manage the Comments
- Comments replication among peers

<Callout title="Showcase implementation example" type="info">
  On the showcase we use Next.js (React) as UI, we provide some API's (CRUD) to
  operate and query the comments, that are are stored on a database. We also
  share changes with other peers via SSE.
</Callout>

## Dependencies

This action needs registered on the Weave instance the following elements:

- [Comment](/docs/main/build/node/comment) node
- [Comments renderer](/docs/main/build/plugins/comments-renderer) plugin

## Usage

<div className="fd-steps">

<div className="[&_h3]:fd-step">

### Import the Action

Start by importing the action:

```ts
import { WeaveCommentToolAction } from "@inditextech/weave-sdk";
```

</div>

<div className='[&_h3]:fd-step'>

### Register the Action

Then register the action on the [Weave](/docs/sdk/api-reference/weave) class instance.

```ts
const instance = new Weave({
  ...
  actions: [
    ...,
    new WeaveCommentToolAction({ // [!code ++]
      config: { // [!code ++]
        model, // here you define some utils to work with your Entity model // [!code ++]
        getUser, // we need the current user model when creating // [!code ++]
        getUserBackgroundColor, // define the background color associated to an user // [!code ++]
        getUserForegroundColor, // define the foreground color associated to an user // [!code ++]
      } // [!code ++]
    }), // [!code ++]
  ]
})
```

</div>

<div className='[&_h3]:fd-step'>

### Setup the action trigger

Setup on a button or any element on the UI the user can interact with on the action event:

```ts
instance.triggerAction("commentTool");
```

---

For example on a button on React:

```tsx
import React from "react";
import { useWeave } from "@inditextech/weave-react";

const MyCommentToolTriggerComponent = () => {
  const instance = useWeave((state) => state.instance);

  const commentTool = React.useCallback(() => {
    instance.triggerAction("commentTool");
  }, [instance]);

  return <button onClick={commentTool}>Comment</button>;
};
```

### Trigger the action

When an user triggers the action:

- The mouse pointer is changed, indicating that it can now add comments.
- When click or tap on the stage (if not a comment), then a callback function
  is called so you can render your _create comment UI_.
- After setting the comment, you can retrieve the comments and render them with the
  [Comments renderer](/docs/main/build/plugins/comments-renderer) plugin.

</div>

</div>
