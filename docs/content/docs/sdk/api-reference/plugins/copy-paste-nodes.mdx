---
title: WeaveCopyPasteNodesPlugin
description: Activate support to copy & paste the nodes
---

import { TypeTable } from "fumadocs-ui/components/type-table";
import { Kbd } from "@/components/kbd";

## Overview

The [WeaveCopyPasteNodesPlugin](https://github.com/InditexTech/weavejs/blob/main/code/packages/sdk/src/plugins/copy-paste-nodes/copy-paste-nodes.ts)
class that enables copying and pasting nodes within the collaborative canvas environment.

It provides users with familiar keyboard shortcuts: <Kbd keys={["Ctrl"]} /> / <Kbd keys={["Cmd"]} /> + <Kbd keys={["C"]} />
to copy and <Kbd keys={["Ctrl"]} /> / <Kbd keys={["Cmd"]} /> + <Kbd keys={["V"]} />
to paste, helping them duplicate nodes or selections easily while keeping all changes synchronized in real-time across
connected users.

This plugin improves productivity and usability, especially in complex design, diagramming, or
whiteboard-style applications.

The class extends the [WeavePlugin](/docs/sdk/api-reference/plugins/plugin) class

## Name

This plugin `name` property value is `copyPasteNodes`.

## Import

```shell
import { WeaveCopyPasteNodesPlugin } from "@inditextech/weave-sdk";
```

## Instantiation

```ts
new WeaveCopyPasteNodesPlugin();
```

## TypeScript types

```ts
export const WEAVE_COPY_PASTE_PASTE_MODES = {
  ["INTERNAL"]: "internal",
  ["EXTERNAL"]: "external",
} as const;

type WeaveCopyPasteNodesPluginOnCopyEvent = Error | undefined;
type WeaveCopyPasteNodesPluginOnPasteEvent = Error | undefined;
type WeaveCopyPasteNodesPluginOnPasteExternalEvent = ClipboardItem;

type WeaveCopyPastePasteModeKeys = keyof typeof WEAVE_COPY_PASTE_PASTE_MODES;
type WeaveCopyPastePasteMode =
  | (typeof WEAVE_COPY_PASTE_PASTE_MODES)[WeaveCopyPastePasteModeKeys]
  | undefined;

type WeavePasteModel = {
  weaveInstanceId: string;
  weave: Record<string, WeaveStateElement>;
  weaveMinPoint: Vector2d;
};

type WeaveToPasteNode = {
  konvaNode: Konva.Node;
  node: NodeSerializable;
};
```

## Methods

### copy

```ts
async copy(): void
```

This method copy the selected nodes to the clipboard.

### paste

```ts
paste(): void
```

This method paste onto the stage the contents of the clipboard ir are supported by Weave.js.

### getAvailablePasteMode

```ts
async getAvailablePasteMode(
  canHandleExternal: (items: ClipboardItems) => Promise<boolean>
): Promise<WeaveCopyPastePasteMode>
```

This method determines the paste mode based on what's on the clipboard.

If there is something on the Weave clipboard (meaning an user copy something on Weave or on other tab)
will return `internal`.

If there is something on the clipboard copied from an external site (not a Weave app), it will provide
the clipboard items to the provided callback in order to determine if our app can manage the external
elements on the clipboard, if the callback returns `true` then the method will return `external`.

If there is nothing on the clipboard (internal or external), the method will return `not-allowed`

## Events

### onCopy

```ts
onCopy: WeaveCopyPasteNodesPluginOnCopyEvent;
```

The `onCopy` event is called when an user triggered a copy action and the copy finished.

### onPaste

```ts
onPaste: WeaveCopyPasteNodesPluginOnPasteEvent;
```

The `onPaste` event is called when an user triggered a paste action and the paste finished.

### onPasteExternal

```ts
onPasteExternal: WeaveCopyPasteNodesPluginOnPasteExternalEvent;
```

The `onPasteExternal` event is called when an user triggers a paste action from elements
external to the actual tab of the browser.
