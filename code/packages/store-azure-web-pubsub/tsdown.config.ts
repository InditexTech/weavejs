// SPDX-FileCopyrightText: 2025 2025 INDUSTRIA DE DISEÃ‘O TEXTIL S.A. (INDITEX S.A.)
//
// SPDX-License-Identifier: Apache-2.0

import { defineConfig } from 'tsdown';

export default [
  defineConfig({
    entry: {
      server: './src/index.server.ts',
    },
    external: [
      '@inditextech/weave-sdk',
      '@inditextech/weave-types',
      'node:async_hooks',
      'node:assert',
      'node:crypto',
      'node:events',
      'node:fs',
      'node:http',
      'node:https',
      'node:net',
      'node:os',
      'node:path',
      'node:process',
      'node:stream',
      'node:tls',
      'node:url',
      'node:util',
      'node:zlib',
      'async_hooks',
      'assert',
      'crypto',
      'events',
      'fs',
      'http',
      'https',
      'net',
      'os',
      'path',
      'process',
      'stream',
      'tls',
      'url',
      'util',
      'zlib',
      'konva',
      'yjs',
      'canvas',
      'skia-canvas',
    ],
    format: ['es'],
    target: 'es2023',
    clean: true,
    dts: true,
    platform: 'node',
    report: true,
  }),
  defineConfig({
    entry: {
      client: './src/index.client.ts',
    },
    external: [
      '@inditextech/weave-sdk',
      '@inditextech/weave-types',
      'node:async_hooks',
      'node:assert',
      'node:crypto',
      'node:events',
      'node:fs',
      'node:http',
      'node:https',
      'node:net',
      'node:os',
      'node:path',
      'node:process',
      'node:stream',
      'node:tls',
      'node:url',
      'node:util',
      'node:zlib',
      'async_hooks',
      'assert',
      'crypto',
      'events',
      'fs',
      'http',
      'https',
      'net',
      'os',
      'path',
      'process',
      'stream',
      'tls',
      'url',
      'util',
      'zlib',
      'konva',
      'yjs',
    ],
    format: ['es'],
    target: 'es2023',
    clean: true,
    dts: true,
    platform: 'browser',
  }),
];
